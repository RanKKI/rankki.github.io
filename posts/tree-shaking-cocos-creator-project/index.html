<!doctype html><html lang=zh-cn><head><link rel=preload href=/lib/font-awesome/webfonts/fa-brands-400.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=preload href=/lib/font-awesome/webfonts/fa-regular-400.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=preload href=/lib/font-awesome/webfonts/fa-solid-900.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=preload href=/lib/JetBrainsMono/web/woff2/JetBrainsMono-Regular.woff2 as=font type=font/woff2 crossorigin=anonymous><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><title>Tree Shaking Cocos Creator 项目 | RanKKI's Blog</title>
<link rel=canonical href=https://rankki.xyz/posts/tree-shaking-cocos-creator-project/><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="all,follow"><meta name=googlebot content="index,follow,snippet,archive"><meta property="og:url" content="https://rankki.xyz/posts/tree-shaking-cocos-creator-project/"><meta property="og:site_name" content="RanKKI's Blog"><meta property="og:title" content="Tree Shaking Cocos Creator 项目"><meta property="og:description" content="Cocos Creator 打包出的项目，会对每个文件生成 helper function，但实际上，我们只有一个 index.js，在打包的时候却把所有的 helper function 打到了一起，因此导致一个 index.js 文件内，拥有很多个 helper function
因此可以通过 Tree Shaking 的方法能裁切掉很多无用的函数定义，从而降低文件大小。"><meta property="og:locale" content="zh_cn"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-09-16T10:32:58+08:00"><meta property="article:modified_time" content="2021-09-18T18:42:24+08:00"><meta property="article:tag" content="Cocos Creator"><meta name=twitter:card content="summary"><meta name=twitter:title content="Tree Shaking Cocos Creator 项目"><meta name=twitter:description content="Cocos Creator 打包出的项目，会对每个文件生成 helper function，但实际上，我们只有一个 index.js，在打包的时候却把所有的 helper function 打到了一起，因此导致一个 index.js 文件内，拥有很多个 helper function
因此可以通过 Tree Shaking 的方法能裁切掉很多无用的函数定义，从而降低文件大小。"><link rel=stylesheet href=https://rankki.xyz/css/styles.703587cbc83e3d6c4abb083f3126cd73c5c67af0782c70bbc9e4643c1d171ec879a51fed1fd12cf82e0469fc4c2454f83d63696957494d2268aa2cc691a4ef06.css><link rel=stylesheet href=https://rankki.xyz/css/syntax.css><link rel=stylesheet href=https://rankki.xyz/css/loading.css><!--[if lt IE 9]><script src=https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js></script><script src=https://oss.maxcdn.com/respond/1.4.2/respond.min.js></script><![endif]--><link rel=icon type=image/png href=https://rankki.xyz/images/favicon.ico></head><body class="max-width mx-auto px3 ltr"><div class="content index py4"><header id=header><a href=https://rankki.xyz/><div id=title><h1>RanKKI's Blog</h1></div></a><div id=nav><ul><li class=icon><a href=# aria-label=Menu><i class="fas fa-bars fa-2x" aria-hidden=true></i></a></li><li><a href=/>Home</a></li><li><a href=/about>About</a></li><li><a href=/tags>Tags</a></li></ul></div></header><div id=header-post><span id=menu><div id=toc><nav id=TableOfContents></nav></div></span></div><article class=post itemscope itemtype=http://schema.org/BlogPosting><header><h1 class=posttitle itemprop="name headline">Tree Shaking Cocos Creator 项目</h1><div class=meta><div class=postdate><time datetime="2021-09-16 10:32:58 +0800 CST" itemprop=datePublished>2021-09-16</time>
(Updated: <time datetime="2021-09-18 18:42:24 +0800 CST" itemprop=dateModified>2021-09-18</time>)</div><div class=article-read-time><i class="far fa-clock"></i>
5 minute read</div><div class=article-tag><i class="fas fa-tag"></i>
<a class=tag-link href=/tags/cocos-creator rel=tag>Cocos Creator</a></div></div></header><div class=content itemprop=articleBody><p>Cocos Creator 打包出的项目，会对每个文件生成 <code>helper function</code>，但实际上，我们只有一个 <code>index.js</code>，在打包的时候却把所有的 <code>helper function</code> 打到了一起，因此导致一个 <code>index.js</code> 文件内，拥有很多个 <code>helper function</code></p><p>因此可以通过 Tree Shaking 的方法能裁切掉很多无用的函数定义，从而降低文件大小。</p><blockquote><p>通过改方法，可以将一个原本 200KB 的代码文件，可以被缩减到 110KB</p></blockquote><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>  1
</span><span class=lnt>  2
</span><span class=lnt>  3
</span><span class=lnt>  4
</span><span class=lnt>  5
</span><span class=lnt>  6
</span><span class=lnt>  7
</span><span class=lnt>  8
</span><span class=lnt>  9
</span><span class=lnt> 10
</span><span class=lnt> 11
</span><span class=lnt> 12
</span><span class=lnt> 13
</span><span class=lnt> 14
</span><span class=lnt> 15
</span><span class=lnt> 16
</span><span class=lnt> 17
</span><span class=lnt> 18
</span><span class=lnt> 19
</span><span class=lnt> 20
</span><span class=lnt> 21
</span><span class=lnt> 22
</span><span class=lnt> 23
</span><span class=lnt> 24
</span><span class=lnt> 25
</span><span class=lnt> 26
</span><span class=lnt> 27
</span><span class=lnt> 28
</span><span class=lnt> 29
</span><span class=lnt> 30
</span><span class=lnt> 31
</span><span class=lnt> 32
</span><span class=lnt> 33
</span><span class=lnt> 34
</span><span class=lnt> 35
</span><span class=lnt> 36
</span><span class=lnt> 37
</span><span class=lnt> 38
</span><span class=lnt> 39
</span><span class=lnt> 40
</span><span class=lnt> 41
</span><span class=lnt> 42
</span><span class=lnt> 43
</span><span class=lnt> 44
</span><span class=lnt> 45
</span><span class=lnt> 46
</span><span class=lnt> 47
</span><span class=lnt> 48
</span><span class=lnt> 49
</span><span class=lnt> 50
</span><span class=lnt> 51
</span><span class=lnt> 52
</span><span class=lnt> 53
</span><span class=lnt> 54
</span><span class=lnt> 55
</span><span class=lnt> 56
</span><span class=lnt> 57
</span><span class=lnt> 58
</span><span class=lnt> 59
</span><span class=lnt> 60
</span><span class=lnt> 61
</span><span class=lnt> 62
</span><span class=lnt> 63
</span><span class=lnt> 64
</span><span class=lnt> 65
</span><span class=lnt> 66
</span><span class=lnt> 67
</span><span class=lnt> 68
</span><span class=lnt> 69
</span><span class=lnt> 70
</span><span class=lnt> 71
</span><span class=lnt> 72
</span><span class=lnt> 73
</span><span class=lnt> 74
</span><span class=lnt> 75
</span><span class=lnt> 76
</span><span class=lnt> 77
</span><span class=lnt> 78
</span><span class=lnt> 79
</span><span class=lnt> 80
</span><span class=lnt> 81
</span><span class=lnt> 82
</span><span class=lnt> 83
</span><span class=lnt> 84
</span><span class=lnt> 85
</span><span class=lnt> 86
</span><span class=lnt> 87
</span><span class=lnt> 88
</span><span class=lnt> 89
</span><span class=lnt> 90
</span><span class=lnt> 91
</span><span class=lnt> 92
</span><span class=lnt> 93
</span><span class=lnt> 94
</span><span class=lnt> 95
</span><span class=lnt> 96
</span><span class=lnt> 97
</span><span class=lnt> 98
</span><span class=lnt> 99
</span><span class=lnt>100
</span><span class=lnt>101
</span><span class=lnt>102
</span><span class=lnt>103
</span><span class=lnt>104
</span><span class=lnt>105
</span><span class=lnt>106
</span><span class=lnt>107
</span><span class=lnt>108
</span><span class=lnt>109
</span><span class=lnt>110
</span><span class=lnt>111
</span><span class=lnt>112
</span><span class=lnt>113
</span><span class=lnt>114
</span><span class=lnt>115
</span><span class=lnt>116
</span><span class=lnt>117
</span><span class=lnt>118
</span><span class=lnt>119
</span><span class=lnt>120
</span><span class=lnt>121
</span><span class=lnt>122
</span><span class=lnt>123
</span><span class=lnt>124
</span><span class=lnt>125
</span><span class=lnt>126
</span><span class=lnt>127
</span><span class=lnt>128
</span><span class=lnt>129
</span><span class=lnt>130
</span><span class=lnt>131
</span><span class=lnt>132
</span><span class=lnt>133
</span><span class=lnt>134
</span><span class=lnt>135
</span><span class=lnt>136
</span><span class=lnt>137
</span><span class=lnt>138
</span><span class=lnt>139
</span><span class=lnt>140
</span><span class=lnt>141
</span><span class=lnt>142
</span><span class=lnt>143
</span><span class=lnt>144
</span><span class=lnt>145
</span><span class=lnt>146
</span><span class=lnt>147
</span><span class=lnt>148
</span><span class=lnt>149
</span><span class=lnt>150
</span><span class=lnt>151
</span><span class=lnt>152
</span><span class=lnt>153
</span><span class=lnt>154
</span><span class=lnt>155
</span><span class=lnt>156
</span><span class=lnt>157
</span><span class=lnt>158
</span><span class=lnt>159
</span><span class=lnt>160
</span><span class=lnt>161
</span><span class=lnt>162
</span><span class=lnt>163
</span><span class=lnt>164
</span><span class=lnt>165
</span><span class=lnt>166
</span><span class=lnt>167
</span><span class=lnt>168
</span><span class=lnt>169
</span><span class=lnt>170
</span><span class=lnt>171
</span><span class=lnt>172
</span><span class=lnt>173
</span><span class=lnt>174
</span><span class=lnt>175
</span><span class=lnt>176
</span><span class=lnt>177
</span><span class=lnt>178
</span><span class=lnt>179
</span><span class=lnt>180
</span><span class=lnt>181
</span><span class=lnt>182
</span><span class=lnt>183
</span><span class=lnt>184
</span><span class=lnt>185
</span><span class=lnt>186
</span><span class=lnt>187
</span><span class=lnt>188
</span><span class=lnt>189
</span><span class=lnt>190
</span><span class=lnt>191
</span><span class=lnt>192
</span><span class=lnt>193
</span><span class=lnt>194
</span><span class=lnt>195
</span><span class=lnt>196
</span><span class=lnt>197
</span><span class=lnt>198
</span><span class=lnt>199
</span><span class=lnt>200
</span><span class=lnt>201
</span><span class=lnt>202
</span><span class=lnt>203
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=s1>&#39;use strict&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>path</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;path&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>ts</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s2>&#34;rollup-plugin-typescript2&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>glob</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s2>&#34;glob&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>fs</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s2>&#34;fs-extra&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>commonjs</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;@rollup/plugin-commonjs&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>rollup</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;rollup&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=p>{</span> <span class=nx>terser</span> <span class=p>}</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;rollup-plugin-terser&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>function</span> <span class=nx>getFileSize</span><span class=p>(</span><span class=nx>path</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>stats</span> <span class=o>=</span> <span class=nx>fs</span><span class=p>.</span><span class=nx>statSync</span><span class=p>(</span><span class=nx>path</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>fileSizeInBytes</span> <span class=o>=</span> <span class=nx>stats</span><span class=p>.</span><span class=nx>size</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>ret</span> <span class=o>=</span> <span class=nx>fileSizeInBytes</span> <span class=o>/</span> <span class=mi>1024</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>ret</span><span class=p>.</span><span class=nx>toFixed</span><span class=p>(</span><span class=mi>4</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>async</span> <span class=kd>function</span> <span class=nx>treeShakeCocos</span><span class=p>(</span><span class=nx>options</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>Editor</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s2>&#34;shake index.js start&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>destPath</span> <span class=o>=</span> <span class=nx>options</span><span class=p>.</span><span class=nx>dest</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>indexJS</span> <span class=o>=</span> <span class=nx>path</span><span class=p>.</span><span class=nx>join</span><span class=p>(</span><span class=nx>destPath</span><span class=p>,</span> <span class=s2>&#34;assets&#34;</span><span class=p>,</span> <span class=s2>&#34;main&#34;</span><span class=p>,</span> <span class=s2>&#34;index.js&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>oldSize</span> <span class=o>=</span> <span class=nx>getFileSize</span><span class=p>(</span><span class=nx>indexJS</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>try</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>bundle</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>rollup</span><span class=p>.</span><span class=nx>rollup</span><span class=p>({</span>
</span></span><span class=line><span class=cl>            <span class=nx>input</span><span class=o>:</span> <span class=s2>&#34;entrypoint.js&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>plugins</span><span class=o>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>                <span class=nx>commonjs</span><span class=p>(),</span>
</span></span><span class=line><span class=cl>                <span class=nx>createEntryPointPlugin</span><span class=p>(</span><span class=nx>options</span><span class=p>),</span>
</span></span><span class=line><span class=cl>                <span class=nx>ts</span><span class=p>({</span>
</span></span><span class=line><span class=cl>                    <span class=nx>cwd</span><span class=o>:</span> <span class=nx>path</span><span class=p>.</span><span class=nx>join</span><span class=p>(</span><span class=s2>&#34;.&#34;</span><span class=p>,</span> <span class=s2>&#34;packages&#34;</span><span class=p>,</span> <span class=s2>&#34;wechatgame_build&#34;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>                    <span class=nx>tsconfig</span><span class=o>:</span> <span class=s2>&#34;tsconfig.rollup.json&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=nx>check</span><span class=o>:</span> <span class=kc>false</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=p>}),</span>
</span></span><span class=line><span class=cl>                <span class=nx>cocosUUIDPlugin</span><span class=p>(),</span>
</span></span><span class=line><span class=cl>            <span class=p>],</span>
</span></span><span class=line><span class=cl>        <span class=p>})</span>
</span></span><span class=line><span class=cl>        <span class=kr>await</span> <span class=nx>bundle</span><span class=p>.</span><span class=nx>write</span><span class=p>({</span>
</span></span><span class=line><span class=cl>            <span class=nx>file</span><span class=o>:</span> <span class=nx>indexJS</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>format</span><span class=o>:</span> <span class=s2>&#34;es&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>minify</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>plugins</span><span class=o>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>                <span class=nx>terser</span><span class=p>({</span>
</span></span><span class=line><span class=cl>                    <span class=nx>output</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                        <span class=nx>comments</span><span class=o>:</span> <span class=kc>false</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                        <span class=nx>ascii_only</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span> <span class=c1>// 仅输出 ascii 字符
</span></span></span><span class=line><span class=cl><span class=c1></span>                        <span class=nx>beautify</span><span class=o>:</span> <span class=kc>false</span><span class=p>,</span><span class=c1>// 最紧凑的输出
</span></span></span><span class=line><span class=cl><span class=c1></span>                    <span class=p>},</span>
</span></span><span class=line><span class=cl>                    <span class=nx>compress</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                        <span class=nx>collapse_vars</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span> <span class=c1>// 内嵌定义了但是只用到一次的变量
</span></span></span><span class=line><span class=cl><span class=c1></span>                        <span class=nx>reduce_vars</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span> <span class=c1>// 提取出出现多次但是没有定义成变量去引用的静态值
</span></span></span><span class=line><span class=cl><span class=c1></span>                    <span class=p>},</span>
</span></span><span class=line><span class=cl>                <span class=p>}),</span>
</span></span><span class=line><span class=cl>            <span class=p>],</span>
</span></span><span class=line><span class=cl>        <span class=p>})</span>
</span></span><span class=line><span class=cl>        <span class=kr>await</span> <span class=nx>bundle</span><span class=p>.</span><span class=nx>close</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>newSize</span> <span class=o>=</span> <span class=nx>getFileSize</span><span class=p>(</span><span class=nx>indexJS</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=nx>Editor</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s2>&#34;shake index.js end, reduce size from&#34;</span><span class=p>,</span> <span class=nx>oldSize</span> <span class=o>+</span> <span class=s2>&#34; KB&#34;</span><span class=p>,</span> <span class=s2>&#34;to&#34;</span><span class=p>,</span> <span class=nx>newSize</span> <span class=o>+</span> <span class=s2>&#34; KB&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span> <span class=k>catch</span> <span class=p>(</span><span class=nx>err</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>Editor</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s2>&#34;Failed to tree shake cocos project&#34;</span><span class=p>,</span> <span class=nx>err</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>async</span> <span class=kd>function</span> <span class=nx>onBuildFinished</span><span class=p>(</span><span class=nx>options</span><span class=p>,</span> <span class=nx>callback</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>process</span><span class=p>.</span><span class=nx>chdir</span><span class=p>(</span><span class=nx>options</span><span class=p>.</span><span class=nx>project</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=kr>await</span> <span class=nx>treeShakeCocos</span><span class=p>(</span><span class=nx>options</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>callback</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>function</span> <span class=nx>createEntryPointPlugin</span><span class=p>(</span><span class=nx>options</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>name</span><span class=o>:</span> <span class=s2>&#34;create-entry-point&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>resolveId</span><span class=p>(</span><span class=nx>source</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=p>(</span><span class=nx>source</span> <span class=o>===</span> <span class=s2>&#34;entrypoint.js&#34;</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=nx>source</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=kc>null</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>},</span>
</span></span><span class=line><span class=cl>        <span class=nx>load</span><span class=p>(</span><span class=nx>id</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=p>(</span><span class=nx>id</span> <span class=o>===</span> <span class=s2>&#34;entrypoint.js&#34;</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=nx>createEntryPoint</span><span class=p>(</span><span class=nx>options</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=kc>null</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=p>};</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>async</span> <span class=kd>function</span> <span class=nx>createEntryPoint</span><span class=p>(</span><span class=nx>options</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>files</span> <span class=o>=</span> <span class=kr>await</span> <span class=nb>Promise</span><span class=p>.</span><span class=nx>all</span><span class=p>([</span>
</span></span><span class=line><span class=cl>        <span class=nx>fetchCode</span><span class=p>(</span><span class=nx>options</span><span class=p>,</span> <span class=s2>&#34;scripts&#34;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>    <span class=p>]);</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>imports</span> <span class=o>=</span> <span class=nx>files</span><span class=p>.</span><span class=nx>flat</span><span class=p>().</span><span class=nx>map</span><span class=p>((</span><span class=nx>file</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=sb>`import &#34;./</span><span class=si>${</span><span class=nx>file</span><span class=si>}</span><span class=sb>&#34;`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>imports</span><span class=p>.</span><span class=nx>flat</span><span class=p>().</span><span class=nx>join</span><span class=p>(</span><span class=s2>&#34;\n&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>async</span> <span class=kd>function</span> <span class=nx>fetchCode</span><span class=p>(</span><span class=nx>options</span><span class=p>,</span> <span class=nx>base</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=k>new</span> <span class=nb>Promise</span><span class=p>((</span><span class=nx>resolve</span><span class=p>,</span> <span class=nx>reject</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>glob</span><span class=p>(</span><span class=sb>`assets/</span><span class=si>${</span><span class=nx>base</span><span class=si>}</span><span class=sb>/**/!(*.d).ts`</span><span class=p>,</span> <span class=kd>function</span> <span class=p>(</span><span class=nx>err</span><span class=p>,</span> <span class=nx>files</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=p>(</span><span class=nx>err</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=nx>reject</span><span class=p>(</span><span class=nx>err</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=nx>resolve</span><span class=p>(</span><span class=nx>files</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>});</span>
</span></span><span class=line><span class=cl>    <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>function</span> <span class=nx>cocosUUIDPlugin</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>name</span><span class=o>:</span> <span class=s2>&#34;create-entry-point&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>resolveId</span><span class=p>(</span><span class=nx>source</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=kc>null</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>},</span>
</span></span><span class=line><span class=cl>        <span class=kr>async</span> <span class=nx>transform</span><span class=p>(</span><span class=nx>code</span><span class=p>,</span> <span class=nx>id</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=p>(</span><span class=nx>id</span><span class=p>.</span><span class=nx>endsWith</span><span class=p>(</span><span class=s2>&#34;.ts&#34;</span><span class=p>)</span> <span class=o>&amp;&amp;</span> <span class=o>!</span><span class=nx>id</span><span class=p>.</span><span class=nx>endsWith</span><span class=p>(</span><span class=s2>&#34;cchelper.ts&#34;</span><span class=p>)</span> <span class=o>&amp;&amp;</span> <span class=sr>/cc\._decorator/</span><span class=p>.</span><span class=nx>test</span><span class=p>(</span><span class=nx>code</span><span class=p>))</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=kr>const</span> <span class=nx>uuid</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>loadUUID</span><span class=p>(</span><span class=nx>id</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=kr>const</span> <span class=nx>result</span> <span class=o>=</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>                    <span class=sb>`cc._RF.push({exports:{}}, &#34;</span><span class=si>${</span><span class=nx>uuid</span><span class=si>}</span><span class=sb>&#34;, &#34;</span><span class=si>${</span><span class=o>/</span><span class=p>.</span><span class=o>*</span><span class=err>\</span><span class=o>/</span><span class=p>([</span><span class=o>^</span><span class=err>\</span><span class=o>/</span><span class=p>]</span><span class=o>*</span><span class=p>)</span><span class=err>\</span><span class=p>.</span><span class=nx>ts</span><span class=o>/</span><span class=p>.</span><span class=nx>exec</span><span class=p>(</span><span class=nx>id</span><span class=p>)[</span><span class=mi>1</span><span class=p>]</span><span class=si>}</span><span class=sb>&#34;);`</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=nx>code</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=sb>`cc._RF.pop();`</span>
</span></span><span class=line><span class=cl>                <span class=p>].</span><span class=nx>join</span><span class=p>(</span><span class=s2>&#34;\n&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=nx>result</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=kc>null</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=p>};</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>async</span> <span class=kd>function</span> <span class=nx>loadUUID</span><span class=p>(</span><span class=nx>codePath</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>metaSrc</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>fs</span><span class=p>.</span><span class=nx>readFile</span><span class=p>(</span><span class=nx>codePath</span> <span class=o>+</span> <span class=s2>&#34;.meta&#34;</span><span class=p>,</span> <span class=s2>&#34;utf-8&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>mate</span> <span class=o>=</span> <span class=nx>JSON</span><span class=p>.</span><span class=nx>parse</span><span class=p>(</span><span class=nx>metaSrc</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>c</span><span class=p>.</span><span class=nx>compressUuid</span><span class=p>(</span><span class=nx>mate</span><span class=p>.</span><span class=nx>uuid</span><span class=p>,</span> <span class=kc>false</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>let</span> <span class=nx>t</span> <span class=o>=</span> <span class=s2>&#34;ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kd>let</span> <span class=nx>r</span> <span class=o>=</span> <span class=k>new</span> <span class=nb>Array</span><span class=p>(</span><span class=mi>128</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=p>(</span><span class=kd>let</span> <span class=nx>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=nx>i</span> <span class=o>&lt;</span> <span class=mi>128</span><span class=p>;</span> <span class=o>++</span><span class=nx>i</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>r</span><span class=p>[</span><span class=nx>i</span><span class=p>]</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=p>(</span><span class=nx>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=nx>i</span> <span class=o>&lt;</span> <span class=mi>64</span><span class=p>;</span> <span class=o>++</span><span class=nx>i</span><span class=p>){</span>
</span></span><span class=line><span class=cl>    <span class=nx>r</span><span class=p>[</span><span class=nx>t</span><span class=p>.</span><span class=nx>charCodeAt</span><span class=p>(</span><span class=nx>i</span><span class=p>)]</span> <span class=o>=</span> <span class=nx>i</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>n</span> <span class=o>=</span> <span class=sr>/-/g</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>s</span> <span class=o>=</span> <span class=sr>/^[0-9a-fA-F-]{36}$/</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>o</span> <span class=o>=</span> <span class=sr>/^[0-9a-fA-F]{32}$/</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>c</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>compressUuid</span><span class=o>:</span> <span class=kd>function</span> <span class=p>(</span><span class=nx>e</span><span class=p>,</span> <span class=nx>t</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=nx>s</span><span class=p>.</span><span class=nx>test</span><span class=p>(</span><span class=nx>e</span><span class=p>))</span> <span class=nx>e</span> <span class=o>=</span> <span class=nx>e</span><span class=p>.</span><span class=nx>replace</span><span class=p>(</span><span class=nx>n</span><span class=p>,</span> <span class=s2>&#34;&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=k>else</span> <span class=k>if</span> <span class=p>(</span><span class=o>!</span><span class=nx>o</span><span class=p>.</span><span class=nx>test</span><span class=p>(</span><span class=nx>e</span><span class=p>))</span> <span class=k>return</span> <span class=nx>e</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=kd>let</span> <span class=nx>r</span> <span class=o>=</span> <span class=o>!</span><span class=mi>0</span> <span class=o>===</span> <span class=nx>t</span> <span class=o>?</span> <span class=mi>2</span> <span class=o>:</span> <span class=mi>5</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nx>c</span><span class=p>.</span><span class=nx>compressHex</span><span class=p>(</span><span class=nx>e</span><span class=p>,</span> <span class=nx>r</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=nx>compressHex</span><span class=o>:</span> <span class=kd>function</span> <span class=p>(</span><span class=nx>e</span><span class=p>,</span> <span class=nx>r</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kd>let</span> <span class=nx>n</span> <span class=o>=</span> <span class=nx>e</span><span class=p>.</span><span class=nx>length</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=kd>let</span> <span class=nx>i</span> <span class=o>=</span> <span class=k>void</span> <span class=mi>0</span> <span class=o>!==</span> <span class=nx>r</span> <span class=o>?</span> <span class=nx>r</span> <span class=o>:</span> <span class=nx>n</span> <span class=o>%</span> <span class=mi>3</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=p>(</span><span class=kd>var</span> <span class=nx>s</span> <span class=o>=</span> <span class=nx>e</span><span class=p>.</span><span class=nx>slice</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=nx>i</span><span class=p>),</span> <span class=nx>o</span> <span class=o>=</span> <span class=p>[];</span> <span class=nx>i</span> <span class=o>&lt;</span> <span class=nx>n</span><span class=p>;)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=kd>var</span> <span class=nx>u</span> <span class=o>=</span> <span class=nb>parseInt</span><span class=p>(</span><span class=nx>e</span><span class=p>[</span><span class=nx>i</span><span class=p>],</span> <span class=mi>16</span><span class=p>),</span>
</span></span><span class=line><span class=cl>                <span class=nx>a</span> <span class=o>=</span> <span class=nb>parseInt</span><span class=p>(</span><span class=nx>e</span><span class=p>[</span><span class=nx>i</span> <span class=o>+</span> <span class=mi>1</span><span class=p>],</span> <span class=mi>16</span><span class=p>),</span>
</span></span><span class=line><span class=cl>                <span class=nx>c</span> <span class=o>=</span> <span class=nb>parseInt</span><span class=p>(</span><span class=nx>e</span><span class=p>[</span><span class=nx>i</span> <span class=o>+</span> <span class=mi>2</span><span class=p>],</span> <span class=mi>16</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=nx>o</span><span class=p>.</span><span class=nx>push</span><span class=p>(</span><span class=nx>t</span><span class=p>[(</span><span class=nx>u</span> <span class=o>&lt;&lt;</span> <span class=mi>2</span><span class=p>)</span> <span class=o>|</span> <span class=p>(</span><span class=nx>a</span> <span class=o>&gt;&gt;</span> <span class=mi>2</span><span class=p>)]),</span> <span class=nx>o</span><span class=p>.</span><span class=nx>push</span><span class=p>(</span><span class=nx>t</span><span class=p>[((</span><span class=mi>3</span> <span class=o>&amp;</span> <span class=nx>a</span><span class=p>)</span> <span class=o>&lt;&lt;</span> <span class=mi>4</span><span class=p>)</span> <span class=o>|</span> <span class=nx>c</span><span class=p>]),</span> <span class=p>(</span><span class=nx>i</span> <span class=o>+=</span> <span class=mi>3</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nx>s</span> <span class=o>+</span> <span class=nx>o</span><span class=p>.</span><span class=nx>join</span><span class=p>(</span><span class=s2>&#34;&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=nx>decompressUuid</span><span class=o>:</span> <span class=kd>function</span> <span class=p>(</span><span class=nx>e</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=mi>23</span> <span class=o>===</span> <span class=nx>e</span><span class=p>.</span><span class=nx>length</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=kd>let</span> <span class=nx>t</span> <span class=o>=</span> <span class=p>[];</span>
</span></span><span class=line><span class=cl>            <span class=k>for</span> <span class=p>(</span><span class=kd>let</span> <span class=nx>i</span> <span class=o>=</span> <span class=mi>5</span><span class=p>;</span> <span class=nx>i</span> <span class=o>&lt;</span> <span class=mi>23</span><span class=p>;</span> <span class=nx>i</span> <span class=o>+=</span> <span class=mi>2</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=kd>let</span> <span class=nx>n</span> <span class=o>=</span> <span class=nx>r</span><span class=p>[</span><span class=nx>e</span><span class=p>.</span><span class=nx>charCodeAt</span><span class=p>(</span><span class=nx>i</span><span class=p>)],</span>
</span></span><span class=line><span class=cl>                    <span class=nx>s</span> <span class=o>=</span> <span class=nx>r</span><span class=p>[</span><span class=nx>e</span><span class=p>.</span><span class=nx>charCodeAt</span><span class=p>(</span><span class=nx>i</span> <span class=o>+</span> <span class=mi>1</span><span class=p>)];</span>
</span></span><span class=line><span class=cl>                <span class=nx>t</span><span class=p>.</span><span class=nx>push</span><span class=p>((</span><span class=nx>n</span> <span class=o>&gt;&gt;</span> <span class=mi>2</span><span class=p>).</span><span class=nx>toString</span><span class=p>(</span><span class=mi>16</span><span class=p>)),</span>
</span></span><span class=line><span class=cl>                    <span class=nx>t</span><span class=p>.</span><span class=nx>push</span><span class=p>((((</span><span class=mi>3</span> <span class=o>&amp;</span> <span class=nx>n</span><span class=p>)</span> <span class=o>&lt;&lt;</span> <span class=mi>2</span><span class=p>)</span> <span class=o>|</span> <span class=p>(</span><span class=nx>s</span> <span class=o>&gt;&gt;</span> <span class=mi>4</span><span class=p>)).</span><span class=nx>toString</span><span class=p>(</span><span class=mi>16</span><span class=p>)),</span>
</span></span><span class=line><span class=cl>                    <span class=nx>t</span><span class=p>.</span><span class=nx>push</span><span class=p>((</span><span class=mi>15</span> <span class=o>&amp;</span> <span class=nx>s</span><span class=p>).</span><span class=nx>toString</span><span class=p>(</span><span class=mi>16</span><span class=p>));</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=nx>e</span> <span class=o>=</span> <span class=nx>e</span><span class=p>.</span><span class=nx>slice</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=mi>5</span><span class=p>)</span> <span class=o>+</span> <span class=nx>t</span><span class=p>.</span><span class=nx>join</span><span class=p>(</span><span class=s2>&#34;&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=p>(</span><span class=mi>22</span> <span class=o>!==</span> <span class=nx>e</span><span class=p>.</span><span class=nx>length</span><span class=p>)</span> <span class=k>return</span> <span class=nx>e</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=kd>let</span> <span class=nx>t</span> <span class=o>=</span> <span class=p>[];</span>
</span></span><span class=line><span class=cl>                <span class=k>for</span> <span class=p>(</span><span class=kd>let</span> <span class=nx>i</span> <span class=o>=</span> <span class=mi>2</span><span class=p>;</span> <span class=nx>i</span> <span class=o>&lt;</span> <span class=mi>22</span><span class=p>;</span> <span class=nx>i</span> <span class=o>+=</span> <span class=mi>2</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                    <span class=kd>let</span> <span class=nx>n</span> <span class=o>=</span> <span class=nx>r</span><span class=p>[</span><span class=nx>e</span><span class=p>.</span><span class=nx>charCodeAt</span><span class=p>(</span><span class=nx>i</span><span class=p>)],</span>
</span></span><span class=line><span class=cl>                        <span class=nx>s</span> <span class=o>=</span> <span class=nx>r</span><span class=p>[</span><span class=nx>e</span><span class=p>.</span><span class=nx>charCodeAt</span><span class=p>(</span><span class=nx>i</span> <span class=o>+</span> <span class=mi>1</span><span class=p>)];</span>
</span></span><span class=line><span class=cl>                    <span class=nx>t</span><span class=p>.</span><span class=nx>push</span><span class=p>((</span><span class=nx>n</span> <span class=o>&gt;&gt;</span> <span class=mi>2</span><span class=p>).</span><span class=nx>toString</span><span class=p>(</span><span class=mi>16</span><span class=p>)),</span>
</span></span><span class=line><span class=cl>                        <span class=nx>t</span><span class=p>.</span><span class=nx>push</span><span class=p>((((</span><span class=mi>3</span> <span class=o>&amp;</span> <span class=nx>n</span><span class=p>)</span> <span class=o>&lt;&lt;</span> <span class=mi>2</span><span class=p>)</span> <span class=o>|</span> <span class=p>(</span><span class=nx>s</span> <span class=o>&gt;&gt;</span> <span class=mi>4</span><span class=p>)).</span><span class=nx>toString</span><span class=p>(</span><span class=mi>16</span><span class=p>)),</span>
</span></span><span class=line><span class=cl>                        <span class=nx>t</span><span class=p>.</span><span class=nx>push</span><span class=p>((</span><span class=mi>15</span> <span class=o>&amp;</span> <span class=nx>s</span><span class=p>).</span><span class=nx>toString</span><span class=p>(</span><span class=mi>16</span><span class=p>));</span>
</span></span><span class=line><span class=cl>                <span class=p>}</span>
</span></span><span class=line><span class=cl>                <span class=nx>e</span> <span class=o>=</span> <span class=nx>e</span><span class=p>.</span><span class=nx>slice</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=mi>2</span><span class=p>)</span> <span class=o>+</span> <span class=nx>t</span><span class=p>.</span><span class=nx>join</span><span class=p>(</span><span class=s2>&#34;&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=p>[</span><span class=nx>e</span><span class=p>.</span><span class=nx>slice</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=mi>8</span><span class=p>),</span> <span class=nx>e</span><span class=p>.</span><span class=nx>slice</span><span class=p>(</span><span class=mi>8</span><span class=p>,</span> <span class=mi>12</span><span class=p>),</span> <span class=nx>e</span><span class=p>.</span><span class=nx>slice</span><span class=p>(</span><span class=mi>12</span><span class=p>,</span> <span class=mi>16</span><span class=p>),</span> <span class=nx>e</span><span class=p>.</span><span class=nx>slice</span><span class=p>(</span><span class=mi>16</span><span class=p>,</span> <span class=mi>20</span><span class=p>),</span> <span class=nx>e</span><span class=p>.</span><span class=nx>slice</span><span class=p>(</span><span class=mi>20</span><span class=p>)].</span><span class=nx>join</span><span class=p>(</span><span class=s2>&#34;-&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>module</span><span class=p>.</span><span class=nx>exports</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>load</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>Editor</span><span class=p>.</span><span class=nx>Builder</span><span class=p>.</span><span class=nx>on</span><span class=p>(</span><span class=s2>&#34;build-finished&#34;</span><span class=p>,</span> <span class=nx>onBuildFinished</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>unload</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>Editor</span><span class=p>.</span><span class=nx>Builder</span><span class=p>.</span><span class=nx>removeListener</span><span class=p>(</span><span class=s2>&#34;build-finished&#34;</span><span class=p>,</span> <span class=nx>onBuildFinished</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span></code></pre></td></tr></table></div></div></div></article><footer id=footer><div class=footer-left>Copyright &copy; 2024 Hugh(Hui) Liu</div><script src=https://code.iconify.design/2/2.0.4/iconify.min.js></script><script defer src=https://static.cloudflareinsights.com/beacon.min.js data-cf-beacon='{"token": "7f02cdd7074d4e1f8125c11651f47699"}'></script></footer></div></body><link rel=stylesheet href=/lib/font-awesome/css/all.min.css><script src=/lib/jquery/jquery.min.js></script><script src=/js/main.js></script></html>